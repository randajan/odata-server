{
  "version": 3,
  "sources": ["../../../src/mods/responder/Express.js"],
  "sourcesContent": ["import jet from \"@randajan/jet-core\";\r\n\r\nconst { solid } = jet.prop;\r\n\r\nexport class ExpressResponder {\r\n\r\n    constructor(request, response) {\r\n        solid.all(this, {request, response});\r\n    }\r\n\r\n    getURL() {\r\n        const req = this.request;\r\n        return req.originalUrl || req.url;\r\n    }\r\n\r\n    getMethod() {\r\n        return this.request.method;\r\n    }\r\n\r\n    async getBody() {\r\n        const req = this.request;\r\n\r\n        if (req.body) { return req.body; }\r\n    \r\n        return new Promise((res, rej) => {\r\n            let body = \"\";\r\n            req.on('data', data => {\r\n                if ((body += data).length > 1e6) { rej({ statusCode: 400, msg: \"Request is too long\" }); }\r\n            });\r\n            req.on('end', _ => {\r\n                try { res(body ? JSON.parse(body) : undefined); }\r\n                catch(e) { rej({ statusCode:400, msg:e.message }); }\r\n            });\r\n        });\r\n    }\r\n\r\n    setHeader(name, value) {\r\n        this.response.setHeader(name, value);\r\n    }\r\n\r\n    setBody(statusCode, body) {\r\n        const res = this.response;\r\n\r\n        res.statusCode = statusCode;\r\n        res.end(body);\r\n    }\r\n    \r\n}\r\n\r\nexport default (req, res)=>new ExpressResponder(req, res);"],
  "mappings": ";AAAA,OAAO,SAAS;AAEhB,IAAM,EAAE,MAAM,IAAI,IAAI;AAEf,IAAM,mBAAN,MAAuB;AAAA,EAE1B,YAAY,SAAS,UAAU;AAC3B,UAAM,IAAI,MAAM,EAAC,SAAS,SAAQ,CAAC;AAAA,EACvC;AAAA,EAEA,SAAS;AACL,UAAM,MAAM,KAAK;AACjB,WAAO,IAAI,eAAe,IAAI;AAAA,EAClC;AAAA,EAEA,YAAY;AACR,WAAO,KAAK,QAAQ;AAAA,EACxB;AAAA,EAEA,MAAM,UAAU;AACZ,UAAM,MAAM,KAAK;AAEjB,QAAI,IAAI,MAAM;AAAE,aAAO,IAAI;AAAA,IAAM;AAEjC,WAAO,IAAI,QAAQ,CAAC,KAAK,QAAQ;AAC7B,UAAI,OAAO;AACX,UAAI,GAAG,QAAQ,UAAQ;AACnB,aAAK,QAAQ,MAAM,SAAS,KAAK;AAAE,cAAI,EAAE,YAAY,KAAK,KAAK,sBAAsB,CAAC;AAAA,QAAG;AAAA,MAC7F,CAAC;AACD,UAAI,GAAG,OAAO,OAAK;AACf,YAAI;AAAE,cAAI,OAAO,KAAK,MAAM,IAAI,IAAI,MAAS;AAAA,QAAG,SAC1C,GAAN;AAAW,cAAI,EAAE,YAAW,KAAK,KAAI,EAAE,QAAQ,CAAC;AAAA,QAAG;AAAA,MACvD,CAAC;AAAA,IACL,CAAC;AAAA,EACL;AAAA,EAEA,UAAU,MAAM,OAAO;AACnB,SAAK,SAAS,UAAU,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,QAAQ,YAAY,MAAM;AACtB,UAAM,MAAM,KAAK;AAEjB,QAAI,aAAa;AACjB,QAAI,IAAI,IAAI;AAAA,EAChB;AAEJ;AAEA,IAAO,kBAAQ,CAAC,KAAK,QAAM,IAAI,iBAAiB,KAAK,GAAG;",
  "names": []
}
