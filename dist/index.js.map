{
  "version": 3,
  "sources": ["../src/class/Server.js", "../src/tools.js", "../src/class/Route.js", "../src/actions/resolvers/collections.js", "../src/actions/resolvers/cors.js", "../src/actions/resolvers/count.js", "../src/actions/resolvers/insert.js", "../src/actions/resolvers/metadata.js", "../src/actions/resolvers/query.js", "../src/actions/resolvers/remove.js", "../src/actions/resolvers/update.js", "import-glob:./resolvers/**", "../src/actions/index.js", "../src/class/Model.js", "../src/class/ModelProp.js", "../src/consts.js", "../src/class/ModelEntity.js", "../src/parsers/types.js", "../src/class/Gateway.js", "../src/class/Context.js", "../src/parsers/options.js", "../src/index.js"],
  "sourcesContent": ["\r\nimport jet from \"@randajan/jet-core\";\r\n\r\nimport { parseUrl, trimUrl, unwrap, vault } from \"../tools\";\r\n\r\nimport { Route } from \"./Route\";\r\n\r\nimport { Model } from \"./Model\";\r\nimport { Gateway } from \"./Gateway\";\r\n\r\nconst { solid, cached } = jet.prop;\r\n\r\nexport class Server {\r\n  constructor(options={}) {\r\n\r\n    const { model, cors, converter, onError } = options;\r\n\r\n    const [ uid, _p ] = vault.set({\r\n      routes:{},\r\n    });\r\n\r\n    solid(this, \"uid\", uid, false);\r\n    solid(this, \"cors\", String.jet.to(cors));\r\n\r\n    cached.all(this, _p, {\r\n      _model:async _=>new Model(this, await (jet.isRunnable(model) ? model() : model), converter)\r\n    }, false);\r\n\r\n    solid.all(this, {\r\n      serve:(responder, url, ...extendArgs)=>{\r\n        const gw = new Gateway(this, url, options, extendArgs);\r\n        return (...a)=>gw.resolve(responder(...a));\r\n      },\r\n      onError:jet.isRunnable(onError) ? onError : ()=>{}\r\n    }, false);\r\n\r\n    this.addRoute(\"get\", '/', \"collections\");\r\n    this.addRoute(\"get\", '/\\$metadata', \"metadata\");\r\n\r\n    this.addRoute(\"get\", '/:entity/\\$count', \"count\");\r\n    this.addRoute(\"get\", '/:entity\\\\(:id\\\\)', \"query\");\r\n    this.addRoute(\"get\", '/:entity', \"query\");\r\n\r\n    this.addRoute(\"delete\", '/:entity\\\\(:id\\\\)', \"remove\");\r\n    this.addRoute(\"patch\", '/:entity\\\\(:id\\\\)', \"update\");\r\n    this.addRoute(\"post\", '/:entity', \"insert\");\r\n\r\n    if (this.cors) { this.addRoute(\"options\", '/(.*)', \"cors\"); }\r\n\r\n  }\r\n\r\n  msg(text) {\r\n    return \"OData server \" + text;\r\n  }\r\n\r\n  addRoute(method, path, action) {\r\n    const { routes } = vault.get(this.uid);\r\n    const list = routes[method] || (routes[method] = []);\r\n    const route = new Route(this, method, path, action);\r\n    list.push(route);\r\n    return route;\r\n  }\r\n\r\n  findRoute(method, path) {\r\n    const _p = vault.get(this.uid);\r\n    const routes = _p.routes[method] || [];\r\n\r\n    for (const route of routes) {\r\n      if (route.test(path)) { return route; }\r\n    }\r\n\r\n    throw { code: 404, msg: \"Not found\" };\r\n  }\r\n\r\n  async fetchModel() {\r\n    return this._model;\r\n  }\r\n\r\n}\r\n", "\r\nimport { parse as urlParser } from \"url\";\r\nimport builder from 'xmlbuilder';\r\nimport jet from \"@randajan/jet-core\";\r\n\r\nconst { solid } = jet.prop;\r\n\r\nexport const vault = jet.vault(\"ODataServer\");\r\n\r\n\r\nexport const withBrackets = (val, quote=\"\")=>{\r\n    const str = String.jet.to(val, quote+\",\"+quote);\r\n    return str ? \"(\"+quote+str+quote+\")\" : \"\";\r\n}\r\n\r\nexport const getScope = (entity, ids, quote=\"\")=>entity + withBrackets(ids, quote);\r\nexport const getScopeMeta = (entity, ids, quote=\"\")=>\"$metadata#\"+getScope(entity, ids, quote);\r\n\r\n\r\nexport const isWrapped = (str, prefix=\"\", suffix=\"\")=>typeof str === \"string\" ? str.startsWith(prefix) && str.endsWith(suffix) : false;\r\nexport const unwrap = (str, prefix=\"\", suffix=\"\")=>isWrapped(str = String.jet.to(str), prefix, suffix) ? str.slice(prefix.length, str.length - suffix.length) : \"\";\r\n\r\nexport const trimUrl = pathname=>pathname.endsWith(\"/\") ? pathname.slice(0, pathname.length-1) : pathname;\r\n\r\nexport const parseUrl = (url, parseQueryString=false)=>{\r\n    url = urlParser(String.jet.to(url) || \"/\", parseQueryString);\r\n    solid(url, \"base\", ((!url.host ? \"\" : (!url.protocol ? \"\" : url.protocol+\"//\")+url.host) + trimUrl(url.pathname)));\r\n    solid(url, \"toString\", _=>url.base, false);\r\n    return url;\r\n}\r\n\r\nexport const decodeParam = param=>param && decodeURIComponent(param).replace(/(^[\"'`]+)|([\"'`]+$)/g, \"\");\r\n\r\nconst _knownBodyTypes = [\"json\", \"xml\"];\r\nexport const setResponderBody = (responder, body, defaultType=\"json\", extraType=\"\")=>{\r\n    let type = responder.getType();\r\n    if (!type || !_knownBodyTypes.includes(type)) { type = defaultType; }\r\n\r\n    responder.setHeader(\"Content-Type\", `application/${type}` + (extraType ? \";\"+extraType : \"\"));\r\n    const out = type === \"json\" ? JSON.stringify(body) : builder.create(body).end({ pretty: true });\r\n    return responder.setBody(200, out);\r\n}", "import { pathToRegexp } from 'path-to-regexp';\r\nimport jet from \"@randajan/jet-core\";\r\n\r\nimport actions from \"../actions\";\r\nimport { decodeParam } from '../tools';\r\n\r\nconst { solid, cached, virtual } = jet.prop;\r\n\r\nexport class Route {\r\n    constructor(server, method, path, action) {\r\n\r\n        const keys = [];\r\n\r\n        cached(this, {}, \"regex\", _ => pathToRegexp(path, keys), false);\r\n        virtual(this, \"keys\", _ => { this.regex; return keys; }, false);\r\n\r\n        solid(this, \"server\", server, false);\r\n        solid.all(this, {\r\n            method,\r\n            path,\r\n            action\r\n        });\r\n\r\n        solid(this, \"resolve\", actions[action]);\r\n\r\n        if (!this.resolve) {\r\n            throw Error(this.msg(`action '${action}' is not one of: '${Object.keys(actions).join(\", \")}'`));\r\n        }\r\n\r\n    }\r\n\r\n    msg(text) {\r\n        return this.server.msg(`route '${this.path}' ${text}`);\r\n    }\r\n\r\n    test(pathname) {\r\n        return this.regex.test(pathname);\r\n    }\r\n\r\n    parseParams(pathname) {\r\n        const { action, regex, keys } = this;\r\n        const ex = regex.exec(pathname);\r\n\r\n        if (!ex) { throw Error(this.msg(`parseParams('${pathname}') failed`)); }\r\n        const params = {};\r\n\r\n        for (let i = 0; i < keys.length; i++) {\r\n            solid(params, keys[i].name, decodeParam(ex[i + 1]));\r\n        }\r\n        \r\n        solid(params, \"count\", action === \"count\");\r\n\r\n        return params;\r\n    }\r\n\r\n}", "export default async context => {\r\n    const { responder, model, gw:{ url } } = context;\r\n\r\n    const collections = [];\r\n  \r\n    for (const name in model.entitySets) {\r\n      if (!(await context.filter(name))) { continue; }\r\n      collections.push({\r\n        kind: \"EntitySet\",\r\n        name,\r\n        url: name,\r\n      });\r\n    }\r\n  \r\n    const out = {\r\n      \"@odata.context\": `${url}/$metadata`,\r\n      value: collections,\r\n    }\r\n\r\n    responder.setHeader(\"Content-Type\", \"application/json\");\r\n    return responder.setBody(200, JSON.stringify(out));\r\n\r\n}", "export default async context => {\r\n    const { responder } = context;\r\n    \r\n    return responder.setBody(204);\r\n};", "export default async context=> {\r\n  const { responder } = context;\r\n  \r\n  const count = Math.max(0, Number.jet.to(await context.fetchResponseBodyRaw()));\r\n  const { $select } = await context.fetchOptions();\r\n\r\n  const out = {\r\n    \"@odata.context\":context.getScopeMeta($select ? Object.keys($select) : \"\"),\r\n    \"@odata.count\":count,\r\n    value:count\r\n  };\r\n\r\n  responder.setHeader(\"Content-Type\", \"application/json;odata.metadata=minimal\");\r\n  return responder.setBody(200, JSON.stringify(out));\r\n\r\n}\r\n", "export default async context=> {\r\n  const { responder } = context;\r\n\r\n  const { primaryKey } = await context.fetchEntity();\r\n  const rawBody = await context.fetchResponseBodyRaw();\r\n  const id = rawBody[primaryKey];\r\n\r\n  const out = {};\r\n  out[\"@odata.context\"] = context.getScopeMetaEntity();\r\n  out[\"@odata.id\"] = out[\"@odata.editLink\"] = context.getScope(id, \"'\");\r\n\r\n  await context.pullResponseBody(out);\r\n\r\n  responder.setHeader(\"Content-Type\", \"application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8\");\r\n  responder.setHeader(\"Location\", context.getScope(encodeURI(id), \"'\"));\r\n  return responder.setBody(201, JSON.stringify(out));\r\n  \r\n};\r\n\r\n\r\n", "import { setResponderBody, unwrap } from \"../../tools\";\r\nimport builder from 'xmlbuilder';\r\n\r\nconst mapProps = async (props, entity, filter)=>{\r\n  const r = [];\r\n  for (const name in props) {\r\n    const { key, type, nullable } = props[name];\r\n    if (!key && entity && !await filter(entity, name)) { continue; }\r\n    r.push({ \"@Name\": name, \"@Type\": type, \"@Nullable\":nullable });\r\n  }\r\n  return r;\r\n}\r\n\r\nexport default async context=> {\r\n\r\n  const { model, responder } = context;\r\n  const namespace = model.namespace;\r\n\r\n  const entityTypes = [];\r\n  const entitySets = [];\r\n  const complexTypes = [];\r\n\r\n  for (const name in model.entitySets) {\r\n    if (!await context.filter(name)) { continue; }\r\n\r\n    const { entityType, primaryKey, props } = model.entitySets[name];\r\n\r\n    entityTypes.push({\r\n      \"@Name\": unwrap(entityType, namespace+\".\"),\r\n      Property:await mapProps(props, name, context.filter),\r\n      Key:primaryKey ? { PropertyRef: { \"@Name\": primaryKey } } : undefined\r\n    });\r\n\r\n    entitySets.push({\r\n      \"@EntityType\": entityType,\r\n      \"@Name\": name\r\n    });\r\n\r\n  }\r\n\r\n  for (const name in model.complexTypes) {\r\n    const { props } = model.complexTypes[name];\r\n    complexTypes.push({ \"@Name\": name, Property:await mapProps(props)});\r\n  }\r\n\r\n  const out = {\r\n    \"edmx:Edmx\": {\r\n      \"@xmlns:edmx\": \"http://docs.oasis-open.org/odata/ns/edmx\",\r\n      \"@Version\": \"4.0\",\r\n      \"edmx:DataServices\": {\r\n        Schema: {\r\n          \"@xmlns\": \"http://docs.oasis-open.org/odata/ns/edm\",\r\n          \"@Namespace\": model.namespace,\r\n          EntityType: entityTypes,\r\n          EntityContainer: {\r\n            \"@Name\": \"Context\",\r\n            EntitySet: entitySets\r\n          },\r\n          ComplexType:complexTypes.length ? complexTypes : undefined\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return setResponderBody(responder, out, \"xml\");\r\n\r\n}", "export default async context=> {\r\n  const { responder, params} = context;\r\n  const { primaryKey } = await context.fetchEntity();\r\n  const { $select, $count } = await context.fetchOptions();\r\n\r\n  let out = {};\r\n\r\n  if (params.hasOwnProperty(\"id\")) {\r\n    out[\"@odata.context\"] = context.getScopeMetaEntity($select ? Object.keys($select) : \"\");\r\n    await context.pullResponseBody(out);\r\n    if (!out.hasOwnProperty(primaryKey)) { throw {code:404, msg:\"Not found\"}; }\r\n  } else {\r\n    out[\"@odata.context\"] = context.getScopeMeta($select ? Object.keys($select) : \"\");\r\n    const value = await context.pullResponseBody([]);\r\n    if ($count) { out[\"@odata.count\"] = value.length; }\r\n    out.value = value;\r\n  }\r\n\r\n  responder.setHeader(\"Content-Type\", \"application/json;odata.metadata=minimal\");\r\n  return responder.setBody(200, JSON.stringify(out));\r\n\r\n}\r\n", "export default async context=> {\r\n  const { responder } = context;\r\n\r\n  await context.fetchEntity();\r\n\r\n  const rawBody = await context.fetchResponseBodyRaw();\r\n  if (!rawBody) { throw {code:404, msg:\"Not found\"}; }\r\n\r\n  return responder.setBody(204);\r\n  \r\n};", "export default async context=> {\r\n  const { responder } = context;\r\n\r\n  await context.fetchEntity();\r\n\r\n  const rawBody = await context.fetchResponseBodyRaw();\r\n  if (!rawBody) { throw {code:404, msg:\"Not found\"}; }\r\n\r\n  return responder.setBody(204);\r\n  \r\n};", "\n        import * as module0 from './resolvers/collections.js';import * as module1 from './resolvers/cors.js';import * as module2 from './resolvers/count.js';import * as module3 from './resolvers/insert.js';import * as module4 from './resolvers/metadata.js';import * as module5 from './resolvers/query.js';import * as module6 from './resolvers/remove.js';import * as module7 from './resolvers/update.js'\n\n        const modules = [module0,module1,module2,module3,module4,module5,module6,module7];\n\n        export default modules;\n        export const filenames = ['./resolvers/collections.js','./resolvers/cors.js','./resolvers/count.js','./resolvers/insert.js','./resolvers/metadata.js','./resolvers/query.js','./resolvers/remove.js','./resolvers/update.js']\n      ", "import * as files from \"./resolvers/**\";\r\n\r\nconst _prefix = \"./resolvers/\";\r\nconst _suffix = \".js\";\r\n\r\nexport const methods = {};\r\nexport default methods;\r\n\r\nfiles.filenames.forEach((pathname, index)=>{\r\n    const name = pathname.substring(_prefix.length).slice(0, -_suffix.length);\r\n    methods[name] = files.default[index].default;\r\n});", "import jet from \"@randajan/jet-core\";\r\n\r\nimport { ModelProp } from \"./ModelProp\";\r\nimport { ModelEntity } from \"./ModelEntity\";\r\nimport { assignPack } from \"../parsers/types\";\r\n\r\nimport { propTypes } from \"../consts\";\r\nimport { isWrapped, unwrap } from \"../tools\";\r\n\r\nconst { solid } = jet.prop;\r\n\r\nconst createProp = (model, msg, name, attrs)=>new ModelProp(model, msg, name, attrs);\r\nconst createEntity = (model, msg, name, attrs)=>new ModelEntity(model, msg, name, attrs);\r\nconst createType = (model, msg, name, props)=>assignPack({}, model, msg, name, props, createProp);\r\n\r\nexport class Model {\r\n\r\n    constructor(server, model, converter) {\r\n        const { namespace, entityTypes, entitySets, complexTypes } = model;\r\n\r\n        solid(this, \"server\", server, false);\r\n        solid(this, \"namespace\", String.jet.to(namespace));\r\n\r\n        if (!this.namespace) { throw Error(this.msg(\"namespace missing\")); }\r\n\r\n        const _msg = this.msg.bind(this);\r\n        solid(this, \"complexTypes\", assignPack({}, this, _msg, \"complexTypes\", complexTypes, createType));\r\n        solid(this, \"entityTypes\", assignPack({}, this, _msg, \"entityTypes\", entityTypes, createType));\r\n        solid(this, \"entitySets\", assignPack({}, this, _msg, \"entitySets\", entitySets, createEntity));\r\n        solid(this, \"convert\", {}, false);\r\n\r\n        const csr = jet.isRunnable(converter);\r\n        if (!csr) { converter = Object.jet.to(converter); }\r\n\r\n        propTypes.map(t=>{\r\n            const fce = csr ? (v, method)=>converter(t, v, method) : jet.isRunnable(converter[t]) ? converter[t] : v=>v;\r\n            solid(this.convert, t, fce);\r\n        });\r\n        \r\n        \r\n    }\r\n\r\n    msg(text, ...path) {\r\n        path = path.join(\".\") || \"\";\r\n        if (path) { path = \".\"+path; }\r\n        return this.server.msg(\"model\" + path + \" \" + text);\r\n    }\r\n\r\n    checkNamespace(str) { return isWrapped(str, this.namespace+\".\"); }\r\n    stripNamespace(str) { return unwrap(str, this.namespace+\".\"); }\r\n\r\n    findEntity(name) {\r\n        const ent = this.entitySets[name];\r\n        if (!ent) { throw Error(this.msg(\"not found!\", \"entitySets\", name)); }\r\n        return ent;\r\n    }\r\n\r\n}", "import jet from \"@randajan/jet-core\";\r\n\r\nimport { propTypes } from \"../consts\";\r\nimport { unwrap } from \"../tools\";\r\n\r\nconst { solid } = jet.prop;\r\n\r\nconst convert = (prop, method, vals, subCollection)=> {\r\n    const { isCollection, complex, primitive, name, model } = prop;\r\n    if (name.startsWith(\"@odata\")) { return; }\r\n\r\n    if (!subCollection && isCollection) {\r\n        return (Array.isArray(vals) ? vals : [vals]).map(v=>convert(prop, method, v, true));\r\n    }\r\n\r\n    if (complex) { return complex[method](vals); }\r\n\r\n    return model.convert[primitive](vals, method);\r\n}\r\n\r\nexport class ModelProp {\r\n\r\n    constructor(model, msg, name, attrs) {\r\n\r\n        solid(this, \"model\", model, false);\r\n        solid(this, \"name\", name);\r\n\r\n        attrs = Object.jet.to(attrs);\r\n        for (const i in attrs) { solid(this, i, attrs[i]); }\r\n\r\n        if (!this.type) { throw Error(msg(`missing!`, name, \"type\")); }\r\n\r\n        const unCollection = unwrap(this.type, \"Collection(\", \")\");\r\n        solid(this, \"isCollection\", !!unCollection);\r\n\r\n        const complexName = unwrap(unCollection || this.type, model.namespace+\".\");\r\n        const complex = model.complexTypes[complexName];\r\n        if (complexName && !complex) { throw Error(msg(`definition missing at 'model.complexTypes.${complexName}'`, name, \"type\")); }\r\n\r\n        solid(this, \"primitive\", complex ? undefined : (unCollection || this.type));\r\n        solid(this, \"complex\", complex);\r\n\r\n        if (!complex && !propTypes.includes(this.primitive)) {\r\n            throw Error(msg(`invalid value '${this.type}' - accepts one of: '${propTypes.join(\", \")}'`, name, \"type\"));\r\n        }\r\n\r\n    }\r\n\r\n\r\n    toAdapter(val) {\r\n        return convert(this, \"toAdapter\", val);\r\n    }\r\n\r\n    toResponse(val) {\r\n        return convert(this, \"toResponse\", val);\r\n    }\r\n\r\n}", "\r\n\r\nexport const propTypes = [\r\n    'Edm.Int16',\r\n    'Edm.Int32',\r\n    'Edm.Int64',\r\n    'Edm.Boolean',\r\n    'Edm.String',\r\n    'Edm.Date',\r\n    'Edm.Single',\r\n    'Edm.Double',\r\n    'Edm.Decimal',\r\n    'Edm.TimeOfDay',\r\n    'Edm.DateTimeOffset',\r\n    'Edm.Byte',\r\n    'Edm.SByte3',\r\n    'Edm.Binary',\r\n];\r\n\r\nexport const knownActions = [\r\n    \"query\",\r\n    \"count\",\r\n    \"insert\",\r\n    \"update\",\r\n    \"remove\"\r\n];\r\n\r\nexport const allowedQueryOptions = ['$', '$filter', '$expand', '$select', '$orderby', '$top', '$skip', '$count', '$format'];", "import jet from \"@randajan/jet-core\";\r\n\r\nimport { unwrap } from \"../tools\";\r\n\r\nconst { solid, cached } = jet.prop;\r\n\r\n\r\nexport class ModelEntity {\r\n\r\n    constructor(model, msg, name, attrs) {\r\n\r\n        solid(this, \"model\", model, false);\r\n        solid(this, \"name\", name);\r\n\r\n        attrs = Object.jet.to(attrs);\r\n        for (const i in attrs) { solid(this, i, attrs[i]); }\r\n\r\n        const entityType = this.entityType;\r\n\r\n        if (!entityType) { throw Error(msg(`missing!`, name, \"entityType\")); }\r\n\r\n        const typeName = unwrap(entityType, model.namespace+\".\");\r\n        if (!typeName) { throw Error(msg(`missing namespace '${ model.namespace }' prefix`, name, \"entityType\")); }\r\n        const props = model.entityTypes[typeName];\r\n        if (!props) { throw Error(msg(`definition missing at 'model.entityTypes.${typeName}'`, name, \"entityType\")); }\r\n\r\n        solid(this, \"props\", props);\r\n\r\n        for (const propName in props) {\r\n            if (!props[propName].key) { continue; }\r\n            if (this.primaryKey) { throw Error(msg(`primaryKey is allready defined as ${this.primaryKey}`, name, propName)); }\r\n            solid(this, \"primaryKey\", propName);\r\n        }\r\n\r\n        if (!this.primaryKey) { throw Error(msg(`primaryKey is missing`, name)); }\r\n\r\n    }\r\n\r\n}", "import jet from \"@randajan/jet-core\";\r\n\r\nconst { cached } = jet.prop;\r\n\r\nconst validateChildDefault = (model, msg, name, child)=>child;\r\n\r\nexport const assignPack = (obj, model, msg, name, childs, validateChild)=>{\r\n    const _p = {};\r\n    const _msg = (text, ...path)=>msg(text, name, ...path);\r\n\r\n    validateChild = validateChild || validateChildDefault;\r\n    childs = Object.jet.to(childs);\r\n    for (let name in childs) {\r\n        const child = childs[name];\r\n        cached(obj, _p, name, _=>validateChild(model, _msg, name, child));\r\n    }\r\n\r\n    return obj;\r\n}\r\n\r\n//filter:props\r\nconst _pull = async (method, context, vals, to)=>{\r\n    const { name, props } = await context.fetchEntity();\r\n    if (typeof vals !== \"object\") { return to; }\r\n    if (typeof to !== \"object\") { to = {}; }\r\n    for (let i in vals) {\r\n        const prop = props[i];\r\n        if (!prop) { continue; }\r\n        if (!prop.key && !await context.filter(name, i)) { continue; }\r\n        const val = prop[method](vals[i]);\r\n        if (val !== undefined) { to[i] = val; }\r\n    }\r\n    return to;\r\n}\r\n\r\nexport const pullBody = async (context, to, vals, method)=>{\r\n    const toArray = Array.isArray(to);\r\n    vals = (toArray === Array.isArray(vals)) ? vals : toArray ? [vals] : vals[0];\r\n    if (!toArray) { return _pull(method, context, vals, to); }\r\n    for (const raw of vals) {\r\n        const val = await _pull(method, context, raw);\r\n        if (val) { to.push(val); }\r\n    }\r\n    return to;\r\n}", "import jet from \"@randajan/jet-core\";\r\n\r\nimport { parseUrl } from \"../tools\";\r\nimport { Context } from \"./Context\";\r\n\r\nconst { solid } = jet.prop;\r\n\r\nexport class Gateway {\r\n\r\n    constructor(server, url, options={}, extendArgs=[]) {\r\n        const { adapter, filter, extender } = options;\r\n\r\n        solid.all(this, {\r\n            url:parseUrl(url, false),\r\n        });\r\n\r\n        solid.all(this, {\r\n            server,\r\n            fetchContext:async responder=>{\r\n                const context = new Context(this, await server.fetchModel(), responder, adapter, filter);\r\n                if (jet.isRunnable(extender)) { await extender(context, ...extendArgs); }\r\n                return context;\r\n            }\r\n        }, false);\r\n\r\n    }\r\n\r\n    msg(text) {\r\n        return this.server.msg(this.url.pathname + \" \" + text);\r\n    }\r\n\r\n    async resolve(responder) {\r\n        const { server } = this;\r\n        let context;\r\n\r\n        try {\r\n            responder.setHeader('OData-Version', '4.0');\r\n            responder.setHeader('DataServiceVersion', '4.0');\r\n            if (server.cors) { responder.setHeader('Access-Control-Allow-Origin', server.cors); }\r\n\r\n            context = await this.fetchContext(responder);\r\n            return context.route.resolve(context);\r\n\r\n        } catch (e) {\r\n\r\n            const error = {\r\n                code: e?.code || 500,\r\n                message: e?.msg || e?.message || \"Unknown error\",\r\n                stack: e?.stack,\r\n                method: responder.getMethod(),\r\n                target: responder.getURL(),\r\n                details: []\r\n            }\r\n\r\n            responder.setHeader('Content-Type', 'application/json');\r\n            responder.setBody(error.code, JSON.stringify({ error }));\r\n\r\n            server.onError(context, error);\r\n\r\n        }\r\n\r\n    }\r\n\r\n}", "import jet from \"@randajan/jet-core\";\r\n\r\nimport { _fetchOptions } from \"../parsers/options\";\r\nimport { getScope, getScopeMeta, isWrapped, parseUrl, trimUrl, unwrap } from \"../tools\";\r\nimport { pullBody } from \"../parsers/types\";\r\n\r\nconst { solid, cached, safe } = jet.prop;\r\n\r\nexport class Context {\r\n    constructor(gw, model, responder, adapter, filter) {\r\n        const { server } = gw;\r\n\r\n        solid.all(this, {\r\n            server,\r\n            gw,\r\n            model\r\n        });\r\n\r\n        solid.all(this, {\r\n            responder,\r\n            filter:jet.isRunnable(filter) ? (entity, property)=>filter(this, entity, property) : _=>true\r\n        }, false);\r\n\r\n        cached.all(this, {}, {\r\n            url: _ =>{\r\n                const urlReq = responder.getURL();\r\n                const urlBase = trimUrl(gw.url.pathname);\r\n                if (!isWrapped(urlReq, urlBase)) { return {}; }\r\n                return parseUrl(unwrap(urlReq, urlBase), true);\r\n            },\r\n            method: _ => responder.getMethod().toLowerCase(),\r\n            route: _ => server.findRoute(this.method, this.url.pathname),\r\n            params: _ => this.route.parseParams(this.url.pathname)\r\n        });\r\n\r\n        cached.all(this, {}, {\r\n            _entity: async _ =>{\r\n                const { entity } = this.params;\r\n                if (await this.filter(entity)) { return this.model.findEntity(entity); }\r\n                throw { code:403, msg:`Forbidden` };\r\n            },\r\n            _options: async _ => _fetchOptions(this.url, this.params, (await this._entity).primaryKey),\r\n            _requestBodyRaw: async _=>responder.getBody(),\r\n            _responseBodyRaw: async _=>{\r\n                const { action } = this.route;\r\n                if (adapter[action]) { return adapter[action](this); }\r\n                throw { code:501, msg:`Action '${action}' is not implemented` };\r\n            }\r\n        }, false);\r\n    }\r\n\r\n    getScope(ids, quote = \"\") {\r\n        const { gw:{url}, params:{entity} } = this;\r\n        return url + \"/\" + getScope(entity, ids, quote);\r\n    }\r\n\r\n    getScopeMeta(ids, quote = \"\") {\r\n        const { gw:{url}, params:{entity} } = this;\r\n        return url + \"/\" + getScopeMeta(entity, ids, quote);\r\n    }\r\n\r\n    getScopeMetaEntity(ids, quote = \"\") {\r\n        return this.getScopeMeta(ids, quote)+\"/$entity\";\r\n    }\r\n\r\n    async fetchEntity() {\r\n        return this._entity;\r\n    }\r\n\r\n    async fetchOptions() {\r\n        return this._options;\r\n    }\r\n\r\n    async fetchRequestBodyRaw() {\r\n        return this._requestBodyRaw;\r\n    }\r\n\r\n    async fetchResponseBodyRaw() {\r\n        return this._responseBodyRaw;\r\n    }\r\n\r\n    async pullRequestBody(to={}) {\r\n        return pullBody(this, to, await this.fetchRequestBodyRaw(), \"toAdapter\");\r\n    }\r\n\r\n    async pullResponseBody(to={}) {\r\n        return pullBody(this, to, await this.fetchResponseBodyRaw(), \"toResponse\");\r\n    }\r\n\r\n}", "import parser from 'odata-parser';\r\nimport querystring from 'querystring';\r\nimport jet from \"@randajan/jet-core\";\r\n\r\nimport { unwrap } from \"../tools\";\r\nimport { allowedQueryOptions } from '../consts';\r\n\r\n\r\n// odata parser returns ['null', ''] for a filter with \"field eq null\"\r\n// we handle the case by fixing the query in case this happens\r\nconst filterBug = val=>(Array.isArray(val) && val.length === 2 && val[0] === 'null' && val[1] === '') ? null : val;\r\n\r\nconst parseOp = (op, left, right, func, args)=>{\r\n  const r = op || [];\r\n  r.push(parseNode(left, func, args));\r\n  r.push(parseNode(right, func, args));\r\n  return r;\r\n}\r\n\r\nconst parseSort = orderBy => {\r\n  const r = {};\r\n  if (!orderBy) { return r; }\r\n  for (const prop of orderBy) {\r\n    const propName = Object.keys(prop)[0];\r\n    r[propName] = prop[propName] === 'desc' ? -1 : 1;\r\n  }\r\n  return r;\r\n}\r\n\r\nconst parseSelect = select => {\r\n  const r = {};\r\n  if (!select) { return r; }\r\n  for (const prop of select) { r[prop] = 1; }\r\n  return r;\r\n}\r\n\r\nconst parseFilter = filter => {\r\n  if (!filter) { return {}; }\r\n  const { type, left, right, func, args } = filter;\r\n  return parseNode({ type, left, right }, func, args);\r\n}\r\n\r\n\r\nconst substringof = (args, result) => {\r\n\r\n  const prop = args[0].type === 'property' ? args[0] : args[1];\r\n  const lit = args[0].type === 'literal' ? args[0] : args[1];\r\n\r\n  result[prop.name] = new RegExp(lit.value);\r\n}\r\n\r\nconst _pushProp = (result, left, rightValue) => {\r\n  if (left.type !== 'property' || left.name.indexOf('/') === -1) { return result[left.name] = rightValue; }\r\n\r\n  const fragments = left.name.split('/');\r\n  const obj = result[fragments[0]] || {};\r\n\r\n  for (let i = 1; i < fragments.length; i++) {\r\n    if (i === (fragments.length - 1)) {\r\n      obj[fragments[i]] = rightValue\r\n    } else {\r\n      obj[fragments[i]] = obj[fragments[i]] || {}\r\n    }\r\n  }\r\n\r\n  return result[fragments[0]] = obj;\r\n}\r\n\r\nconst parseNode = ({ type, left, right }, func, args) => {\r\n  const result = {};\r\n  const pushProp = rightValue=>_pushProp(result, left, rightValue);\r\n\r\n  if (right.type === \"literal\") {\r\n    if (type === 'eq') { pushProp(filterBug(right.value)); }\r\n    if (type === 'lt') { pushProp({ $lt: right.value }); }\r\n    if (type === 'gt') { pushProp({ $gt: right.value }); }\r\n    if (type === 'le') { pushProp({ $lte: right.value }); }\r\n    if (type === 'ge') { pushProp({ $gte: right.value }); }\r\n    if (type === 'ne') { pushProp({ $ne:filterBug(right.value) }); }\r\n  }\r\n\r\n  if (type === 'and') { result.$and = parseOp(result.$and, left, right, func, args); }\r\n  if (type === 'or') { result.$or = parseOp(result.$or, left, right, func, args); }\r\n  if (type === 'functioncall') {\r\n    switch (func) {\r\n      case 'substringof': substringof(args, result)\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nconst parseQuery = (url) => {\r\n  let search = url.search;\r\n  if (!search) { return; }\r\n\r\n  let query = {};\r\n  for (let k in url.query) {\r\n    if (allowedQueryOptions.includes(k)) { query[k] = url.query[k]; }\r\n  }\r\n\r\n  //workaround v4 => v3\r\n  if (Boolean.jet.to(query.$count)) {\r\n    query[\"$inlinecount\"] = \"allpages\";\r\n\r\n    delete query.$count;\r\n    search = querystring.stringify(query);\r\n\r\n    if (!search) { return; }\r\n  }\r\n\r\n  search = decodeURIComponent((unwrap(search, \"?\") || search).replace(/\\+/g, \" \"));\r\n  \r\n  query = search ? parser.parse(search) : {};\r\n\r\n  if (query.$inlinecount != null) {\r\n    query.$count = true;\r\n    delete query.$inlinecount;\r\n  }\r\n\r\n  if (query.$top) { query.$limit = query.$top; }\r\n\r\n  query.$sort = parseSort(query.$orderby);\r\n  query.$filter = parseFilter(query.$filter);\r\n  query.$select = parseSelect(query.$select);\r\n\r\n  return query;\r\n}\r\n\r\n\r\n\r\nexport const _fetchOptions = (url, params, primaryKey) => {\r\n  const query = parseQuery(url) || { $filter: {} };\r\n\r\n  if (params.count) { query.$count = true; }\r\n  if (params.id) { query.$filter[primaryKey] = params.id; }\r\n\r\n  return query;\r\n}", "import { Server } from \"./class/Server.js\";\r\n\r\nexport default (options)=>new Server(options);\r\n\r\nexport {\r\n    Server\r\n}\r\n"],
  "mappings": "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",
  "names": ["jet", "jet", "builder", "solid", "jet", "jet", "jet", "solid", "jet", "jet", "solid", "cached", "jet", "jet", "cached", "name", "solid", "jet", "jet", "jet", "jet", "solid", "cached", "jet", "solid", "jet", "solid", "cached", "jet"]
}
